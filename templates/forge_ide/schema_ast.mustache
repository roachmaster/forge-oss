// ============================================================================
// AUTO-GENERATED FILE — DO NOT EDIT MANUALLY
// ============================================================================


{{#payload}}
{{#mods}}
{{#modules}}
{{#isSchema}}
use serde::{Serialize, Deserialize};
{{#ast}}
{{#items}}

/// ---------------------------------------------------------------------------
/// {{name}} — {{desc}}
/// ---------------------------------------------------------------------------

{{#is_enum}}
#[derive(Debug, Clone, Serialize, Deserialize)]
pub enum {{name}} {
  {{#variants}}
  /// {{desc}}
  {{name}}{{#hasNext}},{{/hasNext}}
  {{/variants}}
}
{{/is_enum}}

{{#is_struct}}
#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct {{name}} {
  {{#fields}}
  pub {{name}}: {{{type}}}{{#hasNext}},{{/hasNext}}
  {{/fields}}
}
{{/is_struct}}

{{#is_json_struct}}
impl {{name}} {
    /// Converts the struct to pretty JSON.
    pub fn to_pretty_json(&self) -> String {
        serde_json::to_string_pretty(self)
            .unwrap_or_else(|_| "{\"error\":\"serialization failed\"}".to_string())
    }

    /// Converts the struct to compact JSON.
    pub fn to_json(&self) -> String {
        serde_json::to_string(self)
            .unwrap_or_else(|_| "{\"error\":\"serialization failed\"}".to_string())
    }

    /// Parses the struct from a JSON string.
    pub fn from_json(s: &str) -> Result<Self, serde_json::Error> {
        serde_json::from_str::<{{name}}>(s)
    }
}
{{/is_json_struct}}

{{#has_custom_methods}}
impl {{name}} {
{{#impls}}
    {{#generics}}
    pub fn {{{name}}}{{{generics}}}(
        {{#args}}
        {{{name}}}: {{{type}}}{{#hasNext}},{{/hasNext}}
        {{/args}}
    ) -> Self {
        {{#is_self_body}}
        Self {
            {{#body.fields}}
            {{{name}}}: {{{value}}}{{#hasNext}},{{/hasNext}}
            {{/body.fields}}
        }{{/is_self_body}}
        {{^is_self_body}}{{{body}}}{{/is_self_body}}
    }
    {{/generics}}
    {{^generics}}
    pub fn {{{name}}}(
        {{#args}}
        {{{name}}}: {{{type}}}{{#hasNext}},{{/hasNext}}
        {{/args}}
    ) -> Self {
        {{#is_self_body}}
        Self {
            {{#body.fields}}
            {{{name}}}: {{{value}}}{{#hasNext}},{{/hasNext}}
            {{/body.fields}}
        }{{/is_self_body}}
        {{^is_self_body}}{{{body}}}{{/is_self_body}}
    }
    {{/generics}}
{{/impls}}
}
{{/has_custom_methods}}

{{/items}}
{{/ast}}
{{/isSchema}}
{{/modules}}
{{/mods}}
{{/payload}}
